<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SECeD - Panel Radio</title>
  <link rel="stylesheet" href="styles.css?v=41" />
</head>
<body class="radio-skin">
  <main class="app">
    <div class="brand"><img src="logo.svg" class="brand-logo" onerror="this.src='logo.png'"/></div>
    <h1 id="mainTitle">SECeD - Panel Radio</h1>
    
    <div class="clock-bar">
      <div class="clock"><span id="clockTime">--:--:--</span></div>
      <div class="controls-right">
        <button id="btnTramo" class="secondary">TRAMO ▾</button>
        <button id="btnRadio" style="background:#0c2415; color:white; padding:8px; border-radius:5px;">RADIO: —</button>
      </div>
    </div>

    <div id="tramoMenu" class="tramo-menu hidden" style="position:absolute; background:white; border:1px solid #ccc; padding:10px; z-index:100;">
      <input type="number" id="tramoInput" placeholder="Nº Tramo" />
      <button id="tramoGo">IR</button>
    </div>

    <section id="grid" class="grid"></section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script>
    // Configuración de IDs desde la URL o LocalStorage
    const urlParams = new URLSearchParams(window.location.search);
    window.TRAMO_ID = urlParams.get('tramo') || localStorage.getItem('seced_tramo') || '1';
    
    document.getElementById('btnRadio').onclick = () => {
      const r = prompt("Introduce tu número de RADIO:", localStorage.getItem('seced_radio_id') || "1");
      if (r) {
        localStorage.setItem('seced_radio_id', r);
        location.reload();
      }
    };

    document.getElementById('tramoGo').onclick = () => {
      const t = document.getElementById('tramoInput').value;
      if (t) {
        localStorage.setItem('seced_tramo', t);
        window.location.search = '?tramo=' + t;
      }
    };
  </script>
  <script src="sync.js"></script>
  <script src="app.js"></script>
</body>
</html>
